<section class="mt-5">
  <div class="container">
    <h2 class="mb-4">Place Order</h2>

    <form action="/submit-order" method="POST">
      <!-- ORDERED PRODUCTS TABLE -->
      <div class="mb-4">
        <h5>Items:</h5>
        <table class="table table-bordered text-center">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Image</th>
              <th>Name</th>
              <th>Price (₹)</th>
              <th>Quantity</th>
              <th>Total (₹)</th>
            </tr>
          </thead>
          <tbody>
            {{#each orderItems}}
            <tr>
              <td>{{inc @index}}</td>
              <td><img src="/product-images/{{this.product._id}}.jpg" width="60"></td>
              <td>{{this.product.Name}}</td>
              <td>{{priceFormat this.product.Price}}</td>
              <td>{{this.quantity}}</td>
              <td>{{multiplyAndFormat this.quantity this.product.Price}}</td>

              <!-- Hidden Fields to pass product IDs and quantities -->
              <input type="hidden" name="productIds[]" value="{{this._id}}">
              <input type="hidden" name="quantities[]" value="{{this.quantity}}">
            </tr>
          </tbody>
        </table>
        <h4 class="text-end">Grand Total: {{priceFormat this.totalPrice}}</h4>
        {{/each}}
        <input type="hidden" name="total" value="{{total}}">
      </div>

      <!-- CUSTOMER DETAILS -->
      <div class="row mb-4 fw-bold">
        <div class="col-md-4">
          <label class="form-label">Full Name</label>
          <input type="text" name="name" class="form-control" required placeholder="Enter your full name">
        </div>
        <div class="col-md-4">
          <label class="form-label">Mobile</label>
          <input type="text" name="mobile" class="form-control" required placeholder="Enter your 10-digit mobile numberr">
        </div>
        <div class="col-md-4">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-control" required placeholder="Enter your email address">
        </div>
      </div>

      <!-- ADDRESS FIELDS -->
      <div class="row mb-4 fw-bold">
        <div class="col-md-3">
          <label class="form-label">City</label>
          <input type="text" name="city" class="form-control" required placeholder="Enter your city">
        </div>
        <div class="col-md-3">
          <label class="form-label">Pincode</label>
          <input type="text" name="pincode" class="form-control" required placeholder="Enter your area pincode">
        </div>
        <div class="col-md-6">
          <label class="form-label">Address Line</label>
          <input type="text" name="addressLine" class="form-control" required placeholder="Enter your full address">
        </div>
      </div>

      <!-- PAYMENT METHOD -->
      <div class="mb-4">
        <label class="form-label">Select Payment Method</label>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="COD" checked>
          <label class="form-check-label" for="cod">Cash on Delivery</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="paymentMethod" id="online" value="Online">
          <label class="form-check-label" for="online">Online Payment</label>
        </div>
      </div>

      <!-- SUBMIT -->
      <div class="text-end">
        <button type="submit" class="btn btn-primary">Confirm Order</button>
      </div>
    </form>
  </div>
</section>
