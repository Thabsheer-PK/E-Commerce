{{#if products}}
<div class="container mt-3 cart-items">
  <div class="row">

    <div class="col-md-7">
      {{#each products}}
      <div class="cart-item border rounded shadow-sm p-3 mb-3" data-product-id="{{this.product._id}}">
        <div class="d-flex flex-row align-items-start gap-3">
          <!-- Image -->
          <div class="text-center my-auto">
            <img src="/product-images/{{this.product._id}}.jpg" alt="{{this.product.Name}}" width="100" style="object-fit: contain;">
          </div>

          <!-- Product Info -->
          <div class="flex-grow-1">
            <h5 class="mb-1">{{this.product.Name}}</h5>
            <p class="text-muted mb-1">{{this.product.Description}}</p>
            <p class="mb-1">Price: <span class="product-price" data-product-id="{{this.product._id}}">{{priceFormat this.product.Price}}</span></p>

            <div class="d-flex align-items-center mt-2">
              <button class="btn btn-sm btn-outline-danger me-2" onclick="changeProductQty('{{this._id}}','{{this.product._id}}',-1)">âˆ’</button>
              <span class="product-qty px-2" data-product-id="{{this.product._id}}">{{this.quantity}}</span>
              <button class="btn btn-sm btn-outline-primary ms-2" onclick="changeProductQty('{{this._id}}','{{this.product._id}}',1)">+</button>
            </div>

            <p class="mt-2">
              Total: <span class="product-total" data-product-id="{{this.product._id}}">{{multiplyAndFormat this.quantity this.product.Price}}</span>
            </p>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex flex-column my-auto" style="width: 9rem;">
            <button class="btn btn-danger mb-2" onclick="removeFromCart('{{this._id}}','{{this.product._id}}')">Remove</button>
            <a href="/place-order-form?productId={{this.product._id}}" class="btn btn-success">Order</a>
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <div class="col-md-5">
      <div class="border rounded shadow-sm p-4 position-sticky" style="top: 100px;">
        <h5>Grand Total: <span class="total-cart-price">{{priceFormat totalCartPrice}}</span></h5>
        <a href="/place-order-form" class="btn placeOderBtn mt-3 w-100" style="">Place All Order</a>
      </div>
    </div>

  </div>
</div>
{{else}}
<div class="alert alert-info mt-4 text-center">
  Your cart is empty. <a href="/">Start Shopping</a>
</div>
{{/if}}
